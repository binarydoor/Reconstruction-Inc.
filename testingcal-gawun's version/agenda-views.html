<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<link href='fullcalendar.min.css' rel='stylesheet' />
<link href='fullcalendar.print.min.css' rel='stylesheet' media='print' />
<script src="https://www.gstatic.com/firebasejs/5.6.0/firebase.js"></script>
<script src='./lib/moment.min.js'></script>
<script src='./lib/jquery.min.js'></script>
<script src='fullcalendar.min.js'></script>
<script>





function getData(stringdata){                                   //120318
  var data = Number(stringdata);
  var month = (data - data%10000)/10000;                  // it would be 12
  var date  = ((data%10000) - (data%10000)%100)/100;  // it would be 03   
                                                      // but the problem is it is just printing 3
  
  var year  = (data%100) + 2000;                      // it would be 18 + 2000 = 2018

  var strdate = date.toString();
  var strmonth = month.toString();    // it needs for making 03 instead of 3

  if(strdate.length == 1){
        return (year+ '-' + month + '-0' + date);
  }
 else{
  return (year+ '-' + month + '-' + date);
 }

}

var array = [{title: 'Click for Google',start:"2018-11-28"},{title: "ha",start: "2018-11-29"}];
  $(document).ready(function() {

     var config = {
                  apiKey: "AIzaSyDiszQtqQ82up58DVKGwwSlRYaiFTQzEsk",
                  authDomain: "reconstruction-inc.firebaseapp.com",
                  databaseURL: "https://reconstruction-inc.firebaseio.com",
                  projectId: "reconstruction-inc",
                  storageBucket: "reconstruction-inc.appspot.com",
                  messagingSenderId: "1072545534960"
    };
    firebase.initializeApp(config);

    var CS188_data = firebase.database().ref('Class/CS188/Assignment');
    var ENGR185_data = firebase.database().ref('Class/ENGR185/Assignment');
    var ECE102_data = firebase.database().ref('Class/ECE102/Assignment');

          CS188_data.on('child_added', function(snapshot) {
          var value = snapshot.val();
          var fixedKey = getData(snapshot.key);
          array.push ({"title": value, "start": fixedKey});
          });
          array.push ({"title": "haha", "start": "2018-12-03"});
        alert(array[2]);  
    $('#calendar').fullCalendar({
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay,listWeek'
      },
      defaultDate: '2018-12-12',
      navLinks: true, // can click day/week names to navigate views
      editable: true,
      eventLimit: true, // allow "more" link when too many events
      events: [array[2]]
          
      

    });


         
          

  });

</script>
<style>

  body {
    margin: 40px 10px;
    padding: 0;
    font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
    font-size: 14px;
  }

  #calendar {
    max-width: 900px;
    margin: 0 auto;
  }

</style>
</head>
<body>

  <div id='calendar'></div>

  <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase.js"></script>
</body>
</html>
